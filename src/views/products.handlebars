<div class="container">
  <div class="mt-4 p-5 bg-dark text-white rounded w-100">
  <h1> ¡Bienvenido {{user.first_name}}!</h1>
  <p>Email - {{user.email}}</p>
  <a href="/api/sessions/logout" role="button">
    <button class="btn btn-light align-self-start" >Cerrar sesión</button>
  </a>
  <a href="/carts/{{user.cartId}}" role="button">
    <button class="btn btn-light align-self-start" >Entrar al carrito <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
  <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
</svg></button>
  </a>
  <a href="/tickets" role="button">
    <button class="btn btn-light align-self-start" >Ordenes</button>
  </a>
  </div>
  <div class="w-75 mx-auto my-5">
    <form action="/products" method="get" class="row g-4">
      <div class="col-sm ">
        <select class="form-select mx-auto" name="sort">
          <option value="null" selected>Order by Price</option>
          <option value="desc">Most Expensive First</option>
          <option value="asc">Least Expensive First</option>
        </select>
      </div>
      <div class="col-sm">
        <select class="form-select mx-auto" name="queryField">
          <option value="">Filter Field</option>
          <option value="category">Category</option>
          <option value="stock">Stock Status</option>
        </select>
      </div>
      <div class="col-sm">
        <select class="form-select mx-auto" name="queryVal">
          <option value="" selected>Filter Value</option>
          <option value="Figures">Figures</option>
          <option value="Manga">Manga</option>
          <option value="Gunpla">Gunpla</option>
          <option value="0">In Stock</option>
        </select>
      </div>
      <div class="col-sm">
        <button type="submit" class="btn btn-dark mx-auto">Filter</button>
      </div>
    </form>
  </div>
  <div class="row mx-auto">
    {{#each products}}
      <div id={{id}} class="col-md-4 mb-3 d-flex align-items-stretch mx-auto">
        <div class="card" style="width: 18rem;">
          <img src={{thumbnails.[0]}} class="card-img-top" alt="Product image" style="height:400px; width:100%; object-fit:cover;"/>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{title}}</h5>
            <p class="card-text mb-4">{{description}}</p>
            <p class="card-text mb-4">${{price}} MXN</p>
            <div class="row mx-auto">
              <button
              type="submit"
              class="btn btn-dark align-self-end col-auto"
              onclick="addToCart('{{../user.cartId}}', '{{id}}')"
            >Add To Cart</button>
            <form action="/products/{{id}}" method="get" class="col-auto my-0 align-self-end">
              <button
                type="submit"
                class="btn btn-dark"
              >Details</button>
            </form>
            </div>
          </div>
        </div>
      </div>
    {{/each}}
  </div>
</div>
<nav class="navbar navbar-expand-lg text-bg-dark">
    <ul class="pagination mx-auto">
      {{#if hasPrevPage}}
        <li class="page-item"><a
            class="btn btn-dark"
            href={{prevLink}}
          >Previous Products</a></li>
      {{/if}}
      {{#if hasNextPage}}
        <li class="page-item"><a
            class="btn btn-dark"
            href={{nextLink}}
          >Next Products</a></li>
      {{/if}}
    </ul>
</nav>
<script src="/js/products.js"></script>